openapi: 3.1.0
info:
  title: x
  version: x
components:
  schemas:
    Container1:
      type: object
      required:
        - field1
      properties:
        field1:
          $ref: "#/components/schemas/Base1"
    Base1:
      type: object
      required:
        - type1
      properties:
        type1:
          type: string
      discriminator:
        propertyName: type1
        mapping:
          a: "#/components/schemas/TypeA"
          b: "#/components/schemas/TypeB"
          c: "#/components/schemas/TypeC"
    TypeA:
      allOf:
        - $ref: "#/components/schemas/Base1"
        - type: object
          properties:
            prop1:
              type: string
    TypeB:
      allOf:
        - $ref: "#/components/schemas/Base1"
        - type: object
          properties:
            prop2:
              type: string
    TypeC:
      allOf:
        - $ref: "#/components/schemas/Base1"
        - type: object
          properties:
            prop3:
              type: boolean
